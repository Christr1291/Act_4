{% extends "base.html" %}
{% block content %}
<h2>Productos</h2>
<a class="btn btn-success mb-3" href="{% url 'agregar_producto' %}">Agregar Producto</a>
<table class="table table-striped table-bordered">
  <thead class="table-light">
    <tr>
      <th>ID</th><th>Nombre</th><th>Precio</th><th>Stock</th><th>Proveedor</th><th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for p in productos %}
    <tr>
      <td>{{ p.id }}</td>
      <td>{{ p.nombre }}</td>
      <td>{{ p.precio }}</td>
      <td>{{ p.stock }}</td>
      <td>{% if p.proveedor %}{{ p.proveedor.nombre }} ({{ p.proveedor.id }}){% else %}-{% endif %}</td>
      <td>
        <a class="btn btn-sm btn-info" href="{% url 'actualizar_producto' p.id %}">Editar</a>
        <form method="post" action="{% url 'borrar_producto' p.id %}" style="display:inline;">
          {% csrf_token %}
          <button class="btn btn-sm btn-danger" type="submit">Borrar</button>
        </form>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center">No hay productos.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}